## 의존성 역전

```
buckpal
└── account
    ├── adapter
    │   └── out
    │        └── persistence
    │           ├── AccountPersistenceAdapter
    │           └── SpringDataAccountRepository
    └── application
        └── SendMoneyService
        └── port
             └── out
                  └── LoadAccountPort
                  └── UpdateAccountStatePort
```



[서비스] -> [포트] <- [영속성 어댑터]

- 서비스에서는 영속성 기능을 사용하기 위해 포트 인터페이스를 호출
- 포트는 데영속성 작업을 수행하고 데이터베이스와 통신할 책임을 가진 영속성 어댑터 클래스에 의해 구현됨
- 영속성 어댑터 -> 아웃고잉 어댑터
  - 애플리케이션에 의해 호출될 뿐, 애플리케이션을 호출하지는 않음
- 포트 -> 서비스와 영속성 코듯 ㅏ이의 간접적 계층

- 의존성은 애플리케이션 코어에서 영속성 어댑터로 향함



## 영속성 어댑터의 책임

- 영속성 어댑터가 하는 일
  1. 입력을 받음
  2. 입력을 데이터베이스 포맷으로 매핑
  3. 입력을 데이터베이스로 보냄
  4. 데이터베이스 출력을 애플리케이션 포맷으로 매핑
  5. 출력을 반환
