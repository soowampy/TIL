## **AMI**

- 인스턴스를 시작하는 데 필요한 정보를 모은 단위
    - 세팅 정보(OS..CPU type... 저장공간 용량 등)를 저장
- 운영체제만 설치된 컴퓨터를 대여할 수도 있고, 운영체제와 함께 특정 런타임이 설치된 컴퓨터를 대여할 수도 있다.
- EC2를 시작하기 위한 기본 세팅의 모음
- 인스턴스 시작 시 AMI를 지정해야 함

### **AMI가 포함하는 것**

- 1개 이상의 EBS 스냅샷 또는 인스턴스 루트 볼륨에 대한 템플릿(운영체제, 애플리케이션 서버, 애플리케이션)
- 시작 권한
- 블록 디바이스 매핑

### **AMI 만드는 과정**

- EBS 스냅샷 -> S3에 저장 (내부 진행) -> AMI 등록
- aws에서 기본 제공
- 본인이 제작 가능

## **인스턴스**

- AWS 클라우드에서 사용하는 가상 컴퓨터
- 사용 사례에 맞게 최적화된 다양한 인스턴스 유형 제공
- EC2 인스턴스란 한정된 요금으로 EC2 인스턴스의 유형을 고르고 사이즈를 골라 각 인스턴스별로 사용 목적에 따라 최적화를 시키는 것이다.
- CPU, 메모리 등과 같은 연산에 관한 처리

## **EBS (Elastic Block Store)**

- EC2 인스턴스에 붙여서 사용하는 볼륨 스토리지
    - EC2 = 메모리, 그래픽카드 등 하드디스크를 제외한 컴퓨터의 모든 부분
    - EBS = 하드디스크
    
    > 볼륨 : EBS로 생성한 디스크 하나 하나
    > 

### **EC2의 파일 보관 방법**

- EBS Based : 반 영구적인 파일의 저장 기능
    - 하드 디스크와 그래픽 카드 메모리 cpu와 분리되어 네트워크로 연결
    - Instance에 비해 느리다
    - EC2를 내려도 EBS는 살아있어 다음에 또 사용이 가능하다
    - 인스턴스 업그레이드 기능
    - STOP이 가능
- Instance Storage : 휘발성이 빠른 방식
    - EC2 내 물리적으로 연결되어 있음
    - 종료시키면 EC2와 함께 날아감
    - 빠른 연산, 굳이 저장할 필요가 없을 때 사용
    - 바로 접근하면 되니까 빠름
    - 빠르지만 저장 필요
    - stop 불가

## **Auto Scaling**

### **스케일링**

- 인스턴스 혹은 컴퓨터 파워를 늘리는 것
- 스케일 업 : 성능 확장 (비쌈)
- 스케일 아웃 : 규모 확장 -> 클라우드에서는 가능
    - 성능 10배를 원한다면 인스턴스 10배 확장
    - 공간의 제약이나 하드웨어적인 제약이 없음
    - 성능 비용 비례
    - 클라우드 환경 -> 스케일 아웃을 항상 염두해두자!
- 스케일 인 : 인스턴스를 줄임

### **오토 스케일링**

- 스케일 아웃을 자동화하기 위해 나온 서비스로, 정책에 따라서 시스템을 자동으로 늘리고 줄여주는 서비스
    - e.g 트래픽 폭주된 상황
        1. CPU 사용률 증가
        2. CPU 점유율 80% 초과
        3. 미리 준비된 이미지를 이용해서 인스턴스 생성
        4. ELB에 연결해서 트래픽을 새로 생성한 EC2 인스턴스에 분산
        5. 트래픽이 줄어들면서 CPU 사용률이 20% 아래로 떨어지면 EC2가 순차적으로 제거됨

### **오토 스케일링의 목표**

- 정확한 수의 EC2 인스턴스를 보유하도록 보장
    - 그룹의 최소 인스턴스 숫자와 최대 인스턴스 숫자를 관리
- 다양한 스케일링 정책 적용 가능

### **시작 템플릿**

- 오토스케일링 그룹에서 인스턴스를 시작하는데 사용하는 템플릿. 이미지 개념

### **구성 요소**

- EC2 인스턴스를 조정 및 관리하는 목적으로 묶어 그룹으로 구성

[https://inpa.tistory.com/entry/AWS-%F0%9F%93%9A-EC2-%EC%98%A4%ED%86%A0-%EC%8A%A4%EC%BC%80%EC%9D%BC%EB%A7%81-ELB-%EB%A1%9C%EB%93%9C-%EB%B0%B8%EB%9F%B0%EC%84%9C-%EA%B0%9C%EB%85%90-%EA%B5%AC%EC%B6%95-%EC%84%B8%ED%8C%85-%F0%9F%92%AF-%EC%A0%95%EB%A6%AC](https://inpa.tistory.com/entry/AWS-%F0%9F%93%9A-EC2-%EC%98%A4%ED%86%A0-%EC%8A%A4%EC%BC%80%EC%9D%BC%EB%A7%81-ELB-%EB%A1%9C%EB%93%9C-%EB%B0%B8%EB%9F%B0%EC%84%9C-%EA%B0%9C%EB%85%90-%EA%B5%AC%EC%B6%95-%EC%84%B8%ED%8C%85-%F0%9F%92%AF-%EC%A0%95%EB%A6%AC)
