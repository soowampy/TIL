## ì—°ê´€ê´€ê³„ ë§¤í•‘

ë°©í–¥ : ë‹¨ë°©í–¥, ì–‘ë°©í–¥

- ë‹¨ë°©í–¥ : íšŒì›â¡íŒ€ ë˜ëŠ” íŒ€â¡íšŒì› ë‘˜ ì¤‘ í•œìª½ë§Œ ì°¸ì¡°
- ì–‘ë°©í–¥ : íšŒì›â¡íŒ€, íŒ€â¡íšŒì› ì–‘ìª½ ëª¨ë‘ ì°¸ì¡°

ë‹¤ì¤‘ì„± : ë‹¤ëŒ€ì¼, ì¼ëŒ€ë‹¤, ì¼ëŒ€ì¼, ë‹¤ëŒ€ë‹¤

ì—°ê°„ê´€ê³„ì˜ ì£¼ì¸ : ê°ì²´ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ëŠ” ê´€ë¦¬ í•„ìš”



### ì—°ê´€ê´€ê³„ê°€ í•„ìš”í•œ ì´ìœ 

-> ê°ì²´ì§€í–¥ì  ì½”ë“œ ì‘ì„±



### ë‹¨ë°©í–¥ ì—°ê´€ê´€ê³„

- íšŒì›ê³¼ íŒ€ì´ ìˆë‹¤
- íšŒì›ì€ í•˜ë‚˜ì˜ íŒ€ì—ë§Œ ì†Œì†ë  ìˆ˜ ìˆë‹¤.
- íšŒì›ê³¼ íŒ€ì€ ë‹¤ëŒ€ì¼ ê´€ê³„ë‹¤.

**íšŒì›ì—ì„œ íŒ€ìœ¼ë¡œ ì ‘ê·¼í•˜ëŠ” ë‹¤ëŒ€ì¼ ë‹¨ë°©í–¥ ë§¤í•‘**

```java
@Entity
public class Member {
    @Id
    @Column(name="MEMBER_ID")
    private String id;
    
    // ì—°ê´€ê´€ê³„ ë§¤í•‘
    @ManyToOne
    @JoinColumn(name="TEAM_ID")
    private Team team;
}

@Entity
public class Team {
    @Id
    @Column(name="TEAM_ID")
    private String id;
    
    private String name;
}
```



### ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„

- íšŒì› â¡ íŒ€ (Member.team)
- íŒ€ â¡ íšŒì› (Team.members)

**íšŒì›ì—ì„œ íŒ€ìœ¼ë¡œ ì ‘ê·¼í•˜ê³  ë°˜ëŒ€ë°©í–¥ì¸ íŒ€ì—ì„œë„ íšŒì›ìœ¼ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì–‘ë°©í–¥ ë§¤í•‘**

```java
@Entity
public class Member {
    @Id
    @Column(name="MEMBER_ID")
    private String id;
    
    // ì—°ê´€ê´€ê³„ ë§¤í•‘
    @ManyToOne
    @JoinColumn(name="TEAM_ID")
    private Team team;
}

@Entity
public class Team {
    @Id
    @Column(name="TEAM_ID")
    private String id;
    
    private String name;
    
    // ì¶”ê°€
    @OneToMany(mappedBy= "team")
    private List<Member> members = new ArrayList<Member>();
}
```





### ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸

Member(id, **Team team**, username) *
Team(id, name, **List members**) 0..1

- ì–‘ë°©í–¥ ë§¤í•‘ ê·œì¹™

  - ê°ì²´ì˜ ë‘ ê´€ê³„ì¤‘ í•˜ë‚˜ë¥¼ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì§€ì •
  - ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ë§Œì´ ì™¸ë˜ í‚¤ë¥¼ ê´€ë¦¬(ë“±ë¡, ìˆ˜ì •)
  - ì£¼ì¸ì´ ì•„ë‹Œìª½ì€ ì½ê¸°ë§Œ ê°€ëŠ¥
  - **ì£¼ì¸ì€ mappedBy ì†ì„± ì‚¬ìš© X**
  - ì£¼ì¸ì´ ì•„ë‹ˆë©´ mappedBy ì†ì„±ìœ¼ë¡œ ì£¼ì¸ ì§€ì •

- ëˆ„êµ¬ë¥¼ ì£¼ì¸ìœ¼ë¡œ?

  - **ì™¸ë˜í‚¤ê°€ ìˆëŠ” ê³³ì„ ì£¼ì¸ìœ¼ë¡œ**

  - Member.team()

    

### ì–‘ë°©í–¥ ë§¤í•‘ì‹œ ê°€ì¥ ë§ì´ í•˜ëŠ” ì‹¤ìˆ˜

  ğŸ‘‰ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì— ê°’ì„ ì…ë ¥í•˜ì§€ ì•ŠìŒ

```java
Team team = new Team();
team.setName("TeamA");
em.persist(team);

Member member = new Member();
member.setName("member1");

// ì—­ë°©í–¥ (ì£¼ì¸ì´ ì•„ë‹Œ ë°©í–¥)ë§Œ ì—°ê´€ê´€ê³„ ì„¤ì •
team.getMembers().add(member);

em.persist(member);
```

**ì‹¤í–‰ê²°ê³¼**

| ID   | USERNAME | TEAM_ID  |
| ---- | -------- | -------- |
| 1    | member1  | **null** |

**ìˆœìˆ˜ ê°ì²´ ê´€ê³„ë¥¼ ê³ ë ¤**í•´ì„œ í•­ìƒ **ì–‘ìª½ì— ê°’ì„ ì„¤ì •**í•´ì•¼ í•¨

```java
Team team = new Team();
team.setName("TeamA");
em.persist(team);

Member member = new Member();
member.setName("member1");

team.getMembers().add(member);
member.setTeam(team);

em.persist(member);
```

ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì†Œë“œë¥¼ ìƒì„±

```java
public void setTeam(Team team) {
    this.team = team;
    team.getMembers().add(this);
}
```

**ì£¼ì˜ì **

 ğŸ™ controllerì—ì„œ entityë¥¼ ë°˜í™˜í•˜ì§€ë§ì!! (dto ë°˜í™˜)

 ğŸ™ ì• ì´ˆì— **ë‹¨ë°©í–¥ ë§¤í•‘**ìœ¼ë¡œ ì„¤ê³„ í•´ì•¼í•¨ã…‹ã…‹ã… ã… 

 
