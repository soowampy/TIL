## ë¦¬ì•¡í‹°ë¸Œ í”„ë¡œê·¸ë˜ë°

http://www.reactive-streams.org

ë¦¬ì•¡í‹°ë¸Œ ìŠ¤íŠ¸ë¦¼ì€ ë°œí–‰ì(publisher)ì™€ êµ¬ë…ì(subscriber) ì‚¬ì´ì˜ ê°„ë‹¨í•œ ê³„ì•½ì„ ì •ì˜í•˜ëŠ” ëª…ì„¸ë‹¤.



## ë¦¬ì•¡í„° íƒ€ì…

ë¦¬ì•¡í‹°ë¸Œ ìŠ¤íŠ¸ë¦¼ì€ ìˆ˜ìš” ì¡°ì ˆì— ê¸°ë°˜í•˜ê³  ìˆë‹¤.

í”„ë¡œì íŠ¸ ë¦¬ì•¡í„°ëŠ” í•µì‹¬ íƒ€ì…ì¸ **Flux<T>** ë¥¼ ì‚¬ìš©í•´ì„œ ìˆ˜ìš” ì¡°ì ˆì„ êµ¬í˜„í•œë‹¤.



> ### ì£¼ë°© ì—­í• ì„ ë‹´ë‹¹í•˜ëŠ” ì„œë¹„ìŠ¤
>
> - ì„œë¹™ ì ì›ì€ ë‹¤ìŒ ìš”ë¦¬ê°€ ì£¼ë°©ì—ì„œ ì–¸ì œ ì™„ì„±ë ì§€ ì•Œ ìˆ˜ ì—†ë‹¤. **ì–¸ì œê°€ ëë“ ** ìš”ë¦¬ê°€ ì™„ì„±ë˜ê³ , ì„œë¹™ ì ì›ì´ ê·¸ ìš”ë¦¬ë¥¼ ë°›ì•„ì„œ ì „ë‹¬í•  ìˆ˜ ìˆëŠ” ìƒíƒœë¼ë©´ ì„œë¹™ ì ì›ì€ ë‹¤ìŒ ìš”ë¦¬ë¥¼ ì†ë‹˜ì—ê²Œ ê°€ì ¸ë‹¤ì¤€ë‹¤	
>
>   ```java
>   class KitchenService {
>       // ë¦¬ì•¡í„°ëŠ” ë…¼ë¸”ë¡œí‚¹ ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì—
>       // ì£¼ë°©ì—ì„œ ìš”ë¦¬ê°€ ì™„ì„±ë  ë•Œê¹Œì§€ ì„œë¹™ ì ì›(ì„œë²„ ìŠ¤ë ˆë“œ)ì´ ë‹¤ë¥¸ ì¼ì„ ëª» í•œ ì±„ ê³„ì† ê¸°ë‹¤ë¦¬ê²Œ í•˜ì§€ ì•ŠëŠ”ë‹¤.
>       Flux<Dish> getDishes() {
>           return Flux.just(
>           	new Dish("sesame chicken"),
>               new Dish("Lo mein noodles, plain"),
>               new Dish("Sweet & sour beef"));
>       }
>   }
>   ```
>
>   ğŸ• Flux<Dish> ì•ˆì— í¬í•¨ëœ ìš”ë¦¬ëŠ” ì–¸ì œ ì™„ì„±ë ì§€ ì•Œ ìˆ˜ ì—†ë‹¤.
>
>   ğŸ• ìš”ë¦¬ê°€ ì™„ì„±ë˜ë©´ ì„œë¹™ ì ì›ì€ í–‰ë™ì— ë‚˜ì„¤ ìˆ˜ ìˆë‹¤. 
>
>   ğŸ• ë¦¬ì•¡í„°ëŠ” **ë…¼ë¸”ë¡œí‚¹** ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— ì£¼ë°©ì—ì„œ ìš”ë¦¬ê°€ ì™„ì„±ë  ë•Œê¹Œì§€ ì ì›ì´ ë‹¤ë¥¸ ì¼ì„ ëª»í•œ ì±„ ê³„ì† ê¸°ë‹¤ë¦¬ê²Œ í•˜ì§€ ì•ŠëŠ”ë‹¤.
>
>   ğŸ•  **Flux**ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì´ ìˆë‹¤.
>
>   - **í•˜ë‚˜ ì´ìƒ**ì˜ Dish(ìš”ë¦¬) í¬í•¨ ê°€ëŠ¥
>   - ê° Dish(ìš”ë¦¬)ê°€ ì œê³µë  ë•Œ **ì–´ë–¤ ì¼ì´ ë°œìƒí•˜ëŠ”ì§€ ì§€ì •** ê°€ëŠ¥
>   - ì„±ê³µê³¼ ì‹¤íŒ¨ì˜ **ë‘ ê°€ì§€ ê²½ë¡œ ëª¨ë‘ì— ëŒ€í•œ ì²˜ë¦¬ ë°©í–¥ ì •ì˜** ê°€ëŠ¥
>   - ê²°ê³¼ í´ë§ ë¶ˆí•„ìš”
>   - í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° ì§€ì›
>
> 
>
> - **ì„œë¹™ ì ì›ì´ ìš”ë¦¬ë¥¼ ì†ë‹˜ì—ê²Œ ë¹„ë™ê¸°ì ìœ¼ë¡œ ê°€ì ¸ë‹¤ì¤Œ**
>
>   ```java
>   class SimpleServer {
>       private final KitchenService kitchen;
>       
>       SimpleServer(KitchenService kitchen) {
>           this.kitchen = kitchen;
>       }
>       
>       // ë ˆìŠ¤í† ë‘ ë§¤ë‹ˆì €ê°€ ì„œë¹™ ì ì›ì„ íˆ­ ì¹˜ë©´
>       // kitchen(ì£¼ë°©) ì— ê°€ì„œ ìš”ë¦¬ë¥¼ ë°›ì•„ì˜¤ëŠ” ì„ë¬´ë¥¼ ìˆ˜í–‰
>       // ì£¼ë°©ì— ìš”ë¦¬ë¥¼ ìš”ì²­í•œ í›„ì—ëŠ” ìš”ë¦¬ ì™„ì„± í›„ í•´ì•¼ í•  ì¼ì„
>       // map() í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì„œ ì§€ì •
>       Flux<Dish> doingMyJob() {
>           return this.kitchen.getDishes()
>               .map(dish -> Dish.deliver(dish));
>       }
>   }
>   ```
>
>   
>
> - ì¹œì ˆí•œ ì„œë¹™ ì ì›
>
>   ```java
>   class PoliteServer {
>       private final KitchenService kitchen;
>       
>       PoliteServer(KitchenService kitchen) {
>           this.kitchen = kitchen;
>       }
>       
>       Flux<Dish> doingMyJob() {
>           return this.kitchen.getDishes()
>               .doOnNext(dish -> System.out.println("Thank you for " + dish + "!"))
>               .doOnError(error -> System.out.println("So sorry about"
>                                                     +error.getMessage()))
>               .doOnComplete(() -> System.out.println("Thanks for all your hard work!"))
>               .map(Dish::deliver);
>       }
>   }
>   ```
>
>   - `doOnNext()`  : ë¦¬ì•¡í‹°ë¸Œ ìŠ¤íŠ¸ë¦¼ì˜ **onNext()** ì‹œê·¸ë„ì„ ë°›ìœ¼ë©´ kitchenì—ê²Œ 'ê°ì‚¬í•©ë‹ˆë‹¤' ë¼ëŠ” ë§ì„ í•˜ëŠ” ê¸°ëŠ¥ì´ ì¶”ê°€ë¨
>
>   -  `doOnError()` : **onError()** ì‹œê·¸ë„ì„ ë°›ìœ¼ë©´ ì²˜ë¦¬í•´ì•¼ í•  ì¼ì„ ì§€ì •í•´ì¤Œ
>
>   -  `doOnComplete()` : **onComplete()** ì‹œê·¸ë„ì„ ë°›ìœ¼ë©´ ì²˜ë¦¬í•´ì•¼ í•  ì¼ì„ ì§€ì •í•´ì¤Œ
>     
>     
>
> - **êµ¬ë…ì„ í†µí•´ ì ì›ì´ ì¼í•˜ê²Œ ë§Œë“œëŠ” ì¹œì ˆí•œ ë ˆìŠ¤í† ë‘**
>
>   ğŸ• ëˆ„êµ°ê°€ ì‹¤ì œ ë°ì´í„°ë¥¼ ìš”ì²­í•˜ê¸° ì „ê¹Œì§€ëŠ” ì•„ë¬´ëŸ° ë°ì´í„°ë„ êµ¬ì²´í™”ë˜ì§€ ì•Šìœ¼ë©° ì–´ë–¤ í–‰ìœ„ë„ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.
>
>   ğŸ• ì„œë¹™ ì ì›ì—ê²Œ ìš”ë¦¬ë¥¼ ì†ë‹˜ì—ê²Œ ê°€ì ¸ë‹¤ì£¼ë¼ê³  ìš”ì²­í•˜ëŠ” ì½”ë“œë¥¼ ë§Œë“¤ì
>
>   ```java
>   class PoliteRestaurant {
>       public static void main(String... args) {
>           PoliteServer server = new PoliteServer(new KitchenService());
>           
>           // server.doingMyJob()ì„ í˜¸ì¶œí•œ í›„ì—
>           server.doingMyJob().
>               // subscribe()ë¥¼ í˜¸ì¶œí•œë‹¤
>               subscribe(
>   		        dish -> System.out.rpintln("Consuming " + dish),
>           		throwable -> System.err.println(throwable)
>           	);
>       }
>   }
>   ```
>
>   - doingMyJob() ì€ Flux<Dish>ë¥¼ ë°˜í™˜í•˜ì§€ë§Œ ì•„ë¬´ëŸ° ì¼ë„ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤.
>
>   - Flux<Dish>ëŠ” ì „ë‹¬ë  ê²°ê³¼ë¥¼ ë‹´ëŠ” í”Œë ˆì´ìŠ¤í™€ë”ì¼ ë¿ì„
>
>   - subscribe()
>
>     - í”„ë¡œì íŠ¸ ë¦¬ì•¡í„°ëŠ” íƒœìƒì ìœ¼ë¡œ ì§€ì—°(lazy) ë°©ì‹
>
>     - ëˆ„êµ°ê°€ë¥¼ êµ¬ë…í•˜ê³  ê²°ê³¼ë¥¼ ë‹¹ê²¨ê°€ê¸° ì „ê¹Œì§€ ì•„ë¬´ëŸ° ì¼ë„ ì¼ì–´ë‚˜ì§€ ì•ŠìŒ
>
>       

[ì˜ˆì œ ì‹¤ìŠµ](https://github.com/suwampy/spring-webflux-study/tree/master/src/main/java/com/study/reactivce/kitchen)
