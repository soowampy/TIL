## ì—°ê´€ê´€ê³„ ë§¤í•‘

### ì—°ê´€ê´€ê³„ ë§¤í•‘ì‹œ ê³ ë ¤ì‚¬í•­

ğŸ‘‰ **ë‹¤ì¤‘ì„±**

- ë‹¤ëŒ€ì¼(@ManyToOne), ì¼ëŒ€ë‹¤(@OneToMany), ì¼ëŒ€ì¼(@OneToOne), ë‹¤ëŒ€ë‹¤(@ManyToMany)

ğŸ‘‰ **ë‹¨ë°©í–¥, ì–‘ë°©í–¥**

- í…Œì´ë¸”
  - ì™¸ë˜í‚¤ í•˜ë‚˜ë¡œ ì–‘ìª½ ì¡°ì¸ ê°€ëŠ¥
  - ë°©í–¥ì´ë¼ëŠ” ê°œë…ì´ ì—†ìŒ

- ê°ì²´

  - ì°¸ì¡°ìš© í•„ë“œê°€ ìˆëŠ” ìª½ìœ¼ë¡œë§Œ ì°¸ì¡° ê°€ëŠ¥

  - í•œìª½ë§Œ ì°¸ì¡°í•˜ë©´ ë‹¨ë°©í–¥

  - ì–‘ìª½ì´ ì„œë¡œ ì°¸ì¡°í•˜ë©´ ì–‘ë°©í–¥

ğŸ‘‰ **ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸**

- í…Œì´ë¸”ì€ ì™¸ë˜ í‚¤ í•˜ë‚˜ë¡œ ë‘ í…Œì´ë¸”ì´ ì—°ê´€ê´€ê³„ë¥¼ ë§ºìŒ
- ê°ì²´ ì–‘ë°©í–¥ ê´€ê³„ëŠ” A->B, B->A ì²˜ëŸ¼ ì°¸ì¡°ê°€ 2êµ°ë°
- ê°ì²´ ì–‘ë°©í–¥ ê´€ê³„ëŠ” ì°¸ì¡°ê°€ 2êµ°ë° ìˆìŒ, ë‘˜ì¤‘ í…Œì´ë¸”ì˜ ì™¸ë˜ í‚¤ë¥¼ ê´€ë¦¬í•  ê³³ì„ ì§€ì •í•´ì•¼ í•¨
- ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ : ì™¸ë˜ í‚¤ë¥¼ ê´€ë¦¬í•˜ëŠ” ì°¸ì¡° (mappedBy ì†ì„±ì„ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ)
- ì£¼ì¸ì˜ ë°˜ëŒ€í¸ : ì™¸ë˜ í‚¤ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŒ, ë‹¨ìˆœ ì¡°íšŒë§Œ ê°€ëŠ¥ (mappedBy ì†ì„± ì‚¬ìš©, ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ í•„ë“œ ì´ë¦„ì„ ê°’ìœ¼ë¡œ ì…ë ¥í•´ì•¼ í•¨)



### ë‹¤ëŒ€ì¼ [N:1]

âœ” ì™¸ë˜ í‚¤ê°€ ìˆëŠ” ìª½ì´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ => ë‹¤ìª½(N)

âœ” ì–‘ìª½ì„ ì„œë¡œ ì°¸ì¡°í•˜ë„ë¡ ê°œë°œ



1. ë‹¤ëŒ€ì¼ ë‹¨ë°©í–¥ [N:1]

   **Member**(id, *Team*, username) â¡ **Team**(id, name)

   ```java
   @Entity
   public class Member {
       @Id @GeneratedValue
       @Column(name = "MEMBER_ID")
       private Long id;
       
       private String username;
       
       @ManyToOne
       // Member.team í•„ë“œë¥¼ TEAM_ID ì™¸ë˜í‚¤ì™€ ë§¤í•‘
       @JoinColumn(name = "TEAM_ID")
       private Team team;
   }
   
   @Entity
   public class Team {
       @Id @GeneratedValue
       @Column(name= "TEAM_ID")
       private Long id;
       
       private String name;
   }
   ```

   íšŒì›ì€ Member.teamìœ¼ë¡œ íŒ€ ì—”í‹°í‹°ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆì§€ë§Œ ë°˜ëŒ€ë¡œ íŒ€ì—ëŠ” íšŒì›ì„ ì°¸ì¡°í•˜ëŠ”í•„ë“œê°€ ì—†ë‹¤ â¡ íšŒì›ê³¼ íŒ€ì€ **ë‹¤ëŒ€ì¼ ë‹¨ë°©í–¥ ì—°ê´€ê´€ê³„**

   

2. ë‹¤ëŒ€ì¼ ì–‘ë°©í–¥ [N:1, 1:N]

   **Member**(id, *Team*, username) â¡ **Team**(id, *members*, name)

   ```java
   @Entity
   public class Member {
       @Id @GeneratedValue
       @Column(name = "MEMBER_ID")
       private Long id;
       
       private String username;
       
       @ManyToOne
       @JoinColumn(name = "TEAM_ID")
       private Team team;
      
   }
   
   @Entity
   public class TEam {
       @Id @GeneratedValue
       @Column(name = "TEAM_ID")
       private Long id;
   
       private String name;
       
       @OneToMany(mappedBy = "team")
       private List<Member> members = new ArrayList<Member>();
   }
   ```

   - **ì–‘ë°©í–¥ì€ ì™¸ë˜í‚¤ê°€ ìˆëŠ” ìª½ì´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸** â¡ ì¼ëŒ€ë‹¤ì™€ ë‹¤ëŒ€ì¼ ì—°ê´€ê´€ê³„ëŠ” í•­ìƒ ë‹¤(N)ìª½ì— ì™¸ë˜ í‚¤ê°€ ìˆìŒ
   - **ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ëŠ” í•­ìƒ ì„œë¡œë¥¼ ì°¸ì¡°í•´ì•¼ í•¨**



### ì¼ëŒ€ë‹¤ [1:N]

âœ” ê¶Œì¥ X

âœ” í…Œì´ë¸” ì¼ëŒ€ë‹¤ ê´€ê³„ëŠ” í•­ìƒ ë‹¤(N) ìª½ì— ì™¸ë˜ í‚¤ê°€ ìˆìŒ

âœ” ê°ì²´ì™€ í…Œì´ë¸”ì˜ ì°¨ì´ ë•Œë¬¸ì— ë°˜ëŒ€í¸ í…Œì´ë¸”ì˜ ì™¸ë˜ í‚¤ë¥¼ ê´€ë¦¬í•˜ëŠ” íŠ¹ì´í•œ êµ¬ì¡°

âœ” @JoinColumnì„ ê¼­ ì‚¬ìš©í•´ì•¼ í•¨. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ì¡°ì¸ í…Œì´ë¸” ë°©ì‹ì„ ì‚¬ìš©



### ì¼ëŒ€ì¼ [1:1]

âœ” ì£¼ í…Œì´ë¸”ì— ì™¸ë˜ í‚¤ ë‹¨ë°˜í–¥

âœ” ì™¸ë˜í‚¤ê°€ ìˆëŠ” ê³³ì´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸

- ì£¼ í…Œì´ë¸”ì— ì™¸ë˜í‚¤ : ì£¼ ê°ì²´ê°€ ëŒ€ìƒ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ëŠ” ê²ƒì²˜ëŸ¼ ì£¼ í…Œì´ë¸”ì— ì™¸ë˜í‚¤ë¥¼ ë‘ê³  ëŒ€ìƒ í…Œì´ë¸”ì„ ì°¸ì¡°. ì£¼ í…Œì´ë¸”ì´ ì™¸ë˜ í‚¤ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë¯€ë¡œ ì£¼ í…Œì´ë¸”ë§Œ í™•ì¸í•´ë„ ëŒ€ìƒ í…Œì´ë¸”ê³¼ ì—°ê´€ê´€ê³„ê°€ ìˆëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŒ.

- ëŒ€ìƒ í…Œì´ë¸”ì— ì™¸ë˜í‚¤ : í…Œì´ë¸” ê´€ê³„ë¥¼ ì¼ëŒ€ì¼ì—ì„œ ì¼ëŒ€ë‹¤ë¡œ ë³€ê²½í•  ë•Œ í…Œì´ë¸” êµ¬ì¡°ë¥¼ ê·¸ëŒ€ë¡œ ìœ ì§€í•  ìˆ˜ ìˆìŒ.

âœ” ë°˜ëŒ€í¸ì€ mappedBy ì ìš©



1. **ì£¼ í…Œì´ë¸”ì— ì™¸ë˜í‚¤** (ê°ì²´ì§€í–¥ ê°œë°œìë“¤ì´ ì„ í˜¸)

   ğŸ‘‰ **ë‹¨ë°©í–¥**

   ```java
   @Entity
   public class Member{
       @Id @GeneratedValue
       @Column(name="MEMBER_ID")
       private Long id;
       
       private String username;
       
       @OneToOne
       @JoinColumn(name="LOCKER_ID")
       private Locker locker;
   }
   
   @Entity
   public clas Locker {
       @Id @GeneratedValue
       @Column(name = "LOCKER_ID")
       private Long id;
       
       private String name;
   }
   ```

   ğŸ‘‰ **ì–‘ë°©í–¥**

   ```java
   @Entity
   public class Member{
       @Id @GeneratedValue
       @Column(name="MEMBER_ID")
       private Long id;
       
       private String username;
       
       @OneToOne
       @JoinColumn(name="LOCKER_ID")
       private Locker locker;
   }
   
   @Entity
   public clas Locker {
       @Id @GeneratedValue
       @Column(name = "LOCKER_ID")
       private Long id;
       
       private String name;
       
   	@OneToOne(mappedBy= "locker")
       private Member member;
   }
   ```

   

2. **ëŒ€ìƒ í…Œì´ë¸”ì— ì™¸ë˜í‚¤**

   ğŸ‘‰ **ë‹¨ë°©í–¥ì€ ì§€ì› X**

   ğŸ‘‰ **ì–‘ë°©í–¥**

   ```java
   @Entity
   public class Member{
       @Id @GeneratedValue
       @Column(name="MEMBER_ID")
       private Long id;
       
       private String username;
       
       @OneToOne(mappedBy = "member")
       private Locker locker;
   }
   
   @Entity
   public clas Locker {
       @Id @GeneratedValue
       @Column(name = "LOCKER_ID")
       private Long id;
       
       private String name;
       
   	@OneToOne(name = "MEMBER_ID")
       private Member member;
   }
   ```

   
