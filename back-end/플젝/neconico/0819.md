## 8ì›”19ì¼ ê³µë¶€^_^

### @PostConstruct

**@PostConstructëž€?**

  @PostConstructëŠ” ì˜ì¡´ì„± ì£¼ìž…ì´ ì´ë£¨ì–´ì§„ í›„ ì´ˆê¸°í™”ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë©”ì„œë“œì´ë‹¤. @PostConstructê°€ ë¶™ì€ ë©”ì„œë“œëŠ” í´ëž˜ìŠ¤ê°€ service(ë¡œì§ì„ íƒˆ ë•Œ? ë¡œ ìƒê° ë¨)ë¥¼ ìˆ˜í–‰í•˜ê¸° ì „ì— ë°œìƒí•œë‹¤. ì´ ë©”ì„œë“œëŠ” ë‹¤ë¥¸ ë¦¬ì†ŒìŠ¤ì—ì„œ í˜¸ì¶œë˜ì§€ ì•ŠëŠ”ë‹¤í•´ë„ ìˆ˜í–‰ëœë‹¤.

**ì™œ ì‚¬ìš©í•˜ëŠ”ê°€(ìž¥ì )?**

1. ìƒì„±ìž(ì¼ë°˜)ê°€ í˜¸ì¶œ ë˜ì—ˆì„ ë•Œ, ë¹ˆ(bean)ì€ ì•„ì§ ì´ˆê¸°í™” ë˜ì§€ ì•Šì•˜ë‹¤. (ì˜ˆë¥¼ ë“¤ì–´, ì£¼ìž…ëœ ì˜ì¡´ì„±ì´ ì—†ìŒ)
   í•˜ì§€ë§Œ, @PostConstructë¥¼ ì‚¬ìš©í•˜ë©´, ë¹ˆ(bean)ì´ ì´ˆê¸°í™” ë¨ê³¼ ë™ì‹œì— ì˜ì¡´ì„±ì„ í™•ì¸í•  ìˆ˜ ìžˆë‹¤. 

   ê°œì¸ ì˜ê²¬ìœ¼ë¡œ í´ëž˜ìŠ¤ ë‚´ì— @Autowiredë¥¼ ë¶™ì—¬ì„œ ê°ì²´ë¥¼ ì‚¬ìš©í•  ë•Œ, ìƒì„±ìžê°€ í•„ìš”í•˜ë‹¤ë©´ @PostConstructë¥¼ ì‚¬ìš©í•˜ë©´ ë  ê²ƒ ê°™ë‹¤. ë¹ˆ(bean)ì´ ë“±ë¡ë˜ê³  ì‚¬ìš©í•  ìˆ˜ ìžˆìœ¼ë‹ˆê¹Œ ë§ì´ë‹¤. ë‚˜ë„ ê·¸ë ‡ê²Œ ì‚¬ìš©í–ˆê³ ..

2. bean lifecycleì—ì„œ ì˜¤ì§ í•œ ë²ˆë§Œ ìˆ˜í–‰ëœë‹¤ëŠ” ê²ƒì„ ë³´ìž¥í•  ìˆ˜ ìžˆë‹¤. 
   (WASê°€ ì˜¬ë¼ê°€ë©´ì„œ beanì´ ìƒì„±ë  ë•Œ ë”± í•œ ë²ˆ ì´ˆê¸°í™”í•¨) ê·¸ëž˜ì„œ @PostConstructë¥¼ ì‚¬ìš©í•˜ë©´ beanì´ ì—¬ëŸ¬ë²ˆ ì´ˆê¸°í™”ë˜ëŠ” ê²ƒì„ ë°©ì§€í•  ìˆ˜ ìžˆë‹¤.



### Gradle

```groovy
plugins {
    id 'java'
}

repositories {
    mavenCentral()
}

dependencies {
    implementation 'org.springframework.boot:spring-boot-starter:2.3.4.RELEASE'
    testImplementation 'org.springframework.boot:spring-boot-starter-test:2.3.4.RELEASE'
}
```

- ***api*** â€“ ì¢…ì†ì„±ì„ ëª…ì‹œì ìœ¼ë¡œ ë§Œë“¤ê³  í´ëž˜ìŠ¤ ê²½ë¡œì— ë…¸ì¶œí•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë¼ì´ë¸ŒëŸ¬ë¦¬ ì†Œë¹„ìžì—ê²Œ íˆ¬ëª…í•˜ê²Œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ êµ¬í˜„í•  ë•Œ

- ***êµ¬í˜„*** â€“ í”„ë¡œë•ì…˜ ì†ŒìŠ¤ ì½”ë“œë¥¼ ì»´íŒŒì¼í•˜ëŠ” ë° í•„ìš”í•˜ë©° ìˆœì „ížˆ ë‚´ë¶€ì ìž…ë‹ˆë‹¤. íŒ¨í‚¤ì§€ ì™¸ë¶€ì— ë…¸ì¶œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

- ***compileOnly*** â€“ ì†ŒìŠ¤ ì „ìš© ì£¼ì„ ë˜ëŠ” ì£¼ì„ í”„ë¡œì„¸ì„œì™€ ê°™ì´ ì»´íŒŒì¼ íƒ€ìž„ì—ë§Œ ì„ ì–¸í•´ì•¼ í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤. ëŸ°íƒ€ìž„ í´ëž˜ìŠ¤ ê²½ë¡œ ë˜ëŠ” í…ŒìŠ¤íŠ¸ í´ëž˜ìŠ¤ ê²½ë¡œì— ë‚˜íƒ€ë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

- ***compileOnlyApi\*** â€“ ì»´íŒŒì¼ ì‹œê°„ì— í•„ìš”í•  ë•Œì™€ ì†Œë¹„ìžë¥¼ ìœ„í•œ í´ëž˜ìŠ¤ ê²½ë¡œì—ì„œ ë³¼ ìˆ˜ ìžˆì–´ì•¼ í•  ë•Œ ì‚¬ìš©

- ***runtimeOnly*** â€“ ëŸ°íƒ€ìž„ì—ë§Œ í•„ìš”í•˜ê³  ì»´íŒŒì¼ ì‹œê°„ì—ëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ì¢…ì†ì„±ì„ ì„ ì–¸í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.

- ***testImplementation*** â€“ í…ŒìŠ¤íŠ¸ë¥¼ ì»´íŒŒì¼í•˜ëŠ” ë° í•„ìš”

- ***testCompileOnly*** â€“ í…ŒìŠ¤íŠ¸ ì»´íŒŒì¼ ì‹œê°„ì—ë§Œ í•„ìš”

- ***testRuntimeOnly*** â€“ í…ŒìŠ¤íŠ¸ ëŸ°íƒ€ìž„ì—ë§Œ í•„ìš”

  

### VO, DAO, DTO, Entity Classì˜ ì°¨ì´

ðŸ‘‰ **VO** (Value Object) 

- **ê°’ ê·¸ ìžì²´ë¥¼ í‘œí˜„í•˜ëŠ” ê°ì²´**
- ë¡œì§ì„ í¬í•¨í•  ìˆ˜ ìžˆìœ¼ë©°, ê°ì²´ì˜ ë¶ˆë³€ì„±(ê°ì²´ì˜ ì •ë³´ê°€ ë³€ê²½ë˜ì§€ ì•ŠìŒ)ì„ ë³´ìž¥



ðŸ‘‰ **DAO** (Data Access Object) : *repository package*

- **ì‹¤ì œë¡œ DBì— ì ‘ê·¼í•˜ëŠ” ê°ì²´**
- Serviceì™€ DBë¥¼ ì—°ê²°í•˜ëŠ” ê³ ë¦¬ì˜ ì—­í• 

- SQLì„ ì‚¬ìš©í•´ DBì— ì ‘ê·¼í•œ í›„ ì ì ˆí•œ CRUD APIë¥¼ ì œê³µ



ðŸ‘‰ **DTO** (Data Transfer Object) : *dto package* 

- **ê³„ì¸µ(Layer)ê°„ ë°ì´í„° êµí™˜ì„ ìœ„í•œ ê°ì²´ (Java Beans)**

- ë°ì´í„° êµí™˜ë§Œì„ ìœ„í•´ ì‚¬ìš©í•˜ë¯€ë¡œ ë¡œì§ì„ ê°–ì§€ ì•Šê³ , ë°ì´í„°ë¥¼ ë‹´ê³  êº¼ë‚´ëŠ” **getter/setter ë©”ì†Œë“œë§Œ ê°–ëŠ”ë‹¤**
- Requestì™€ Responseìš© DTOëŠ” `View`ë¥¼ ìœ„í•œ í´ëž˜ìŠ¤
  - ìžì£¼ ë³€ê²½ì´ í•„ìš”í•œ í´ëž˜ìŠ¤
  - Presentation Model
  - toEntity() ë©”ì„œë“œë¥¼ í†µí•´ì„œ DTOì—ì„œ í•„ìš”í•œ ë¶€ë¶„ì„ ì´ìš©í•˜ì—¬ Entityë¡œ ë§Œë“ ë‹¤.
  - ë˜í•œ Controller Layerì—ì„œ Response DTO í˜•íƒœë¡œ Clientì— ì „ë‹¬í•œë‹¤.

ðŸ‘‰ **Entity** : *domain package* 

- **ì‹¤ì œ DBì˜ í…Œì´ë¸”ê³¼ ë§¤ì¹­ë  í´ëž˜ìŠ¤**ë¡œ DBì˜ í…Œì´ë¸”ë‚´ì— ì¡´ìž¬í•˜ëŠ” ì»¬ëŸ¼ë§Œì„ ì†ì„±ìœ¼ë¡œ ê°€ì ¸ì•¼ í•¨

- `@Entity`, `@Column` , `@id` ë“±ì„ ì´ìš©

- ìµœëŒ€í•œ ì™¸ë¶€ì—ì„œ Entity í´ëž˜ìŠ¤ì˜ getter methodë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šë„ë¡ í•´ë‹¹ í´ëž˜ìŠ¤ ì•ˆì—ì„œ í•„ìš”í•œ ë¡œì§ methodì„ êµ¬í˜„í•œë‹¤.

  - ë‹¨, Domain Logicë§Œ ê°€ì§€ê³  ìžˆì–´ì•¼ í•˜ê³  Presentation Logicì„ ê°€ì§€ê³  ìžˆì–´ì„œëŠ” ì•ˆëœë‹¤.
  - ì—¬ê¸°ì„œ êµ¬í˜„í•œ methodëŠ” ì£¼ë¡œ Service Layerì—ì„œ ì‚¬ìš©í•œë‹¤.

- ì—”í‹°í‹°ë¥¼ ìž‘ì„±í•  ë•Œ Setterë¥¼ ë¬´ë¶„ë³„í•˜ê²Œ ì‚¬ìš©í•˜ë©´ ê°ì²´(Entity)ì˜ ê°’ì„ ë³€ê²½í•  ìˆ˜ ìžˆìœ¼ë¯€ë¡œ ê°ì²´ì˜ ì¼ê´€ì„±ì„ ë³´ìž¥í•  ìˆ˜ ì—†ë‹¤. ê°ì²´ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•  ìˆ˜ ìžˆì–´ì•¼ ìœ ì§€ ë³´ìˆ˜ì„±ì´ ì˜¬ë¼ê°€ê¸° ë•Œë¬¸ì— **Setterë¥¼ ì‚¬ìš©í•´ì„œëŠ” ì•ˆë˜ë©°, ê°ì²´ì˜ ìƒì„±ìžì— ê°’ë“¤ì„ ë„£ì–´ì¤Œìœ¼ë¡œì¨ Setter ì‚¬ìš©ì„ ì¤„ì¼ ìˆ˜ ìžˆë‹¤**

  ```java
  // ê°ì²´ ìƒì„±ìž ì„¤ì •
  @Builder
  public Member(String username, String password, String name) {
          this.username = username;
          this.password = password;
          this.name = name;
      }
  
  
  // ê°ì²´ ìƒì„± ì‹œ ê°’ ì„¸íŒ…(ë¹Œë”íŒ¨í„´ ì‚¬ìš©)
  Member member = Member.Builder()
        .username("name")
        .password("1234")
        .name("name)
        .build();
  ```

  ì•„ëž˜ì™€ ê°™ì´ **ê¸°ë³¸ ìƒì„±ìž ì ‘ê·¼ ì œí•œìžë¥¼ protectedë¡œ ë³€ê²½**í•˜ë©´ **new Member() ì‚¬ìš©ì„ ì œí•œ**í•´ **Entityì˜ ì¼ê´€ì„±ì„ ë” ìœ ì§€**í•  ìˆ˜ ìžˆë‹¤.

  ```java
  // Member ì—”í‹°í‹°
  @Entity
  @Getter
  @Table(name = "member")
  public class Member{
  
      // ê¸°ë³¸ ìƒì„±ìž protectedë¡œ ì ‘ê·¼ ì œí•œ(ê¸°ë³¸ ìƒì„±ìž ì ‘ê·¼ ì œí•œìžëŠ” protected ê¹Œì§€ í—ˆìš©
      //ê¸°ë³¸ ìƒì„±ìžì˜ ì ‘ê·¼ ì œí•œìžë¥¼ privateìœ¼ë¡œ ê±¸ë©´, ì¶”í›„ì— Lazy Loading ì‚¬ìš© ì‹œ Proxy ê´€ë ¨ ì˜ˆì™¸ê°€ ë°œìƒ)
      protected Member(){};
      
      ...
  }
  
  
  // @NoArgsconstructor ì–´ë…¸í…Œì´ì…˜ì„ í†µí•œ protected ì ‘ê·¼ ì œì–´.
  @Entity
  @NoArgsConstructor(access = AccessLevel.PROTECTED)
  @Getter
  @Table(name = "member")
  public class Member {
  
  }
  ```



> ðŸ‘€**DTOì™€ Entity ë¶„ë¦¬**
>
> dto ê°ì²´ëŠ” View layerì™€ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ì„ ë•Œ ì‚¬ìš©ëœë‹¤.
>
> entityê°ì²´ëŠ” db layerì™€ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ì„ ë•Œ ì‚¬ìš©ëœë‹¤. 
>
> https://www.popit.kr/spring-oop-%EC%99%B8%EB%B6%80-api-%ED%98%B8%EC%B6%9C%EC%97%90-%EB%8C%80%ED%95%9C-%EA%B3%A0%EC%B0%B0/ <ì´ê±°ìœ ìš©í•œë“¯?



### Service Interfaceë¥¼ ë°˜ë“œì‹œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ê°€?

ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ êµ¬í˜„í•˜ëŠ” êµ¬í˜„ë¶€ì¸ ServiceImplì€ ìˆœìˆ˜ ìžë°”ê°ì²´ë¡œ ì´ë£¨ì–´ì ¸ ìžˆìŠµë‹ˆë‹¤. ê°ì²´ì§€í–¥ê´€ì (OOP)ì—ì„œì˜ ì¶”ìƒí™”, ìº¡ìŠí™”, ìƒì†ë“±ì˜ ì´ìœ ë¡œ ì¶”ìƒí´ëž˜ìŠ¤ì˜ ì—­í• ì„í•˜ëŠ” Interfaceë¥¼ ì‚¬ìš©í•˜ëŠ”ë°, ë°˜ë“œì‹œ ì‚¬ìš©í•´ì•¼í•˜ëŠ”ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤.

Serviceë¥¼ ì¶”ìƒí´ëž˜ìŠ¤ë¡œ ì‚¬ìš©í•˜ë©´ Serviceì˜ ë©”ì„œë“œëª…ì„ ë³´ê³  'ì–´ë–¤ ê¸°ëŠ¥ì´ êµ¬í˜„ë˜ì–´ìžˆêµ¬ë‚˜' ë¼ê³  ìœ ì¶”ë¥¼ í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ Service í•˜ë‚˜ë‹¹ í•˜ë‚˜ì˜ ServiceImpl(êµ¬í˜„ë¶€). ì¦‰ **1:1 êµ¬ì¡°ë¼ë©´** ê¸°ëŠ¥í•˜ë‚˜ë‹¹ Interfaceê°€ í•˜ë‚˜ì”© ëŠ˜ì–´ë‚˜ê²Œë©ë‹ˆë‹¤. ì´ëŸ¬í•œ ê²½ìš°ì—ëŠ” **êµ³ì´ Interfaceë¥¼ ì‚¬ìš©í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤.**

ë‹¨, **1:N êµ¬ì¡°ì—ëŠ” ì‚¬ìš©í•˜ëŠ”ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.** 1:N êµ¬ì¡°ë¼ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì˜ˆì‹œê°€ ìžˆìŠµë‹ˆë‹¤. ê²Œì‹œë¬¼ ëª©ë¡ì„ ì¡°íšŒí•œ ìƒíƒœì—ì„œ ì œëª©ì„ í´ë¦­í•˜ì—¬, ìƒì„¸ë‚´ìš©ì„ ë³´ë„ë¡ í•˜ëŠ” ê²Œì‹œë¬¼ ìƒì„¸ë³´ê¸° ê¸°ëŠ¥ì´ ìžˆìŠµë‹ˆë‹¤. 

ê²Œì‹œë¬¼ ì œëª©ì„ í´ë¦­í•˜ë©´, ë‚´ìš©ì´ ì¶œë ¥ë˜ì–´ì•¼í•˜ë¯€ë¡œ, ê²Œì‹œë¬¼ ë‚´ìš© ì¡°íšŒê¸°ëŠ¥ì„ ìˆ˜í–‰í•´ì•¼í•©ë‹ˆë‹¤. ë˜ ë‹¤ë¥¸ê¸°ëŠ¥ìœ¼ë¡œ ì¡°íšŒìˆ˜ ì¦ê°€ê¸°ëŠ¥ë„ ìžˆìŠµë‹ˆë‹¤. **ì´ë ‡ê²Œ í•˜ë‚˜ì˜ ìž‘ì—…ìœ¼ë¡œ ì¸í•´ 2(N)ê°œ ì´ìƒì˜ ìž‘ì—…ì„ ìˆ˜í–‰í•˜ê±°ë‚˜, ì¶”ê°€ë  ì˜ˆì •ì¸ ê²½ìš°ì—ëŠ” Interfaceë¥¼ ìƒì„±í•˜ì—¬ ê´€ë¦¬í•˜ëŠ”ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.**
